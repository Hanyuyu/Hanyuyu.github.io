<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Javaç±»åŠ è½½å™¨ | stevenhy&#39;s pocket</title>
<meta name="description" content="ç»ç’ƒæ˜äº®, æ©˜å­è¾‰ç…Œ">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="http://stevenhy.com/favicon.ico?v=1578923502331">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="http://stevenhy.com/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136833409-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-136833409-1');
</script>


  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="http://stevenhy.com">
        <img src="http://stevenhy.com/images/avatar.png?v=1578923502331" class="site-logo">
        <h1 class="site-title">stevenhy&#39;s pocket</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/Hanyuyu" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      ç»ç’ƒæ˜äº®, æ©˜å­è¾‰ç…Œ
    </div>
    <div class="site-footer">
      âŒ¨ä»£ç  | ğŸ’¡äº§å“ | ğŸ“Šæ•°æ® <br>
ğŸ’¬ wechatï¼šMr15110552330 | <a class="rss" href="http://stevenhy.com/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Javaç±»åŠ è½½å™¨</h2>
            <div class="post-date">2019-09-07</div>
            
              <div class="feature-container" style="background-image: url('http://stevenhy.com/post-images/gaQfofbzk.png')">
              </div>
            
            <div class="post-content">
              <!-- more -->
<h3 id="ä¸€æ®µjavaä»£ç ä»ç¼–å†™å®Œæ¯•åˆ°æˆåŠŸæ‰§è¡Œ-è¿™ä¹‹é—´åˆ°åº•ç»å†äº†ä»€ä¹ˆè¿‡ç¨‹">ä¸€æ®µjavaä»£ç ä»ç¼–å†™å®Œæ¯•åˆ°æˆåŠŸæ‰§è¡Œ, è¿™ä¹‹é—´åˆ°åº•ç»å†äº†ä»€ä¹ˆè¿‡ç¨‹?</h3>
<h3 id="å…¶ä¸­åˆè¿è¡Œç€å“ªäº›æœºåˆ¶å˜">å…¶ä¸­åˆè¿è¡Œç€å“ªäº›æœºåˆ¶å˜?</h3>
<!-- more -->
<p><a href="https://www.cnblogs.com/wang-meng/p/5574071.html">åŸæ–‡é“¾æ¥, ä½œè€…å†™çš„å¤ªæ£’äº†!</a></p>
<p>ä¸€ã€é—®é¢˜</p>
<p>è¯·æ–°å»ºå¦‚ä¸‹ç±»ï¼Œå¹¶è¿è¡Œå®ƒï¼š</p>
<pre><code class="language-java">1 package java.lang;
2 
3 public class Long {
4     public static void main(String[] args) {
5         System.out.println(&quot;Hi, i am here&quot;);
6     }
7 }
</code></pre>
<p><strong>ä½ èƒ½çŒœåˆ°å®ƒçš„è¿è¡Œå¦‚æœå—ï¼Ÿ ä¸é”™ï¼Œå°±æ˜¯å¦‚ä¸‹è¿™ä¸ªæ ·å­ï¼</strong></p>
<pre><code class="language-java">é”™è¯¯: åœ¨ç±» java.lang.Long ä¸­æ‰¾ä¸åˆ° main æ–¹æ³•, è¯·å°† main æ–¹æ³•å®šä¹‰ä¸º:
public static void main(String[] args)
å¦åˆ™ JavaFX åº”ç”¨ç¨‹åºç±»å¿…é¡»æ‰©å±•javafx.application.Application
</code></pre>
<p>ä¸ºä»€ä¹ˆå‘¢ï¼Œæ˜æ˜æˆ‘åœ¨Longæ–¹æ³•ç±»ä¸­å®šä¹‰äº†mainæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¯´mainæ–¹æ³•æ²¡æœ‰å®šä¹‰å‘¢ï¼Ÿ</p>
<p>æœ¬æ–‡å°†è§£å†³ä»¥ä¸Šé—®é¢˜å‡ºç°çš„åŸå› ã€‚</p>
<p>äºŒã€ClassLoaderçš„ä½œç”¨</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“javaç¨‹åºå†™å¥½ä»¥åæ˜¯ä»¥.javaï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰çš„æ–‡ä»¶å­˜åœ¨ç£ç›˜ä¸Šï¼Œç„¶åï¼Œæˆ‘ä»¬é€šè¿‡(bin/javac.exe)ç¼–è¯‘å‘½ä»¤æŠŠ.javaæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶ï¼ˆå­—èŠ‚ç æ–‡ä»¶ï¼‰ï¼Œå¹¶å­˜åœ¨ç£ç›˜ä¸Šã€‚ä½†æ˜¯ç¨‹åºè¦è¿è¡Œï¼Œé¦–å…ˆä¸€å®šè¦æŠŠ.classæ–‡ä»¶åŠ è½½åˆ°JVMå†…å­˜ä¸­æ‰èƒ½ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬æ‰€è®²çš„classLoader,å°±æ˜¯è´Ÿè´£æŠŠç£ç›˜ä¸Šçš„.classæ–‡ä»¶åŠ è½½åˆ°JVMå†…å­˜ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="1"><img src="http://stevenhy.com/post-images/1567820465126.png" alt=""></figure>
<p>ä½ å¯ä»¥è®¤ä¸ºæ¯ä¸€ä¸ªClasså¯¹è±¡æ‹¥æœ‰ç£ç›˜ä¸Šçš„é‚£ä¸ª.classå­—èŠ‚ç å†…å®¹,æ¯ä¸€ä¸ªclasså¯¹è±¡éƒ½æœ‰ä¸€ä¸ªgetClassLoader()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè®©ä½ çŸ¥é“æ˜¯è°æŠŠæˆ‘ä».classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­å˜æˆClasså¯¹è±¡çš„(å› ä¸ºä¸æ­¢ä¸€ä¸ªclassloaderå¯ä»¥æŠŠç±»åŠ è½½åˆ°å†…å­˜ä¸­)ã€‚</p>
<p>ä¸‰ã€ClassLoaderå±‚æ¬¡ç»“æ„</p>
<p>è¯·æ‰§è¡Œå¦‚ä¸‹ç¨‹åºï¼š</p>
<pre><code class="language-java"> 1 public class Test {
 2     public static void main(String[] args) {
 3         ClassLoader classLoader = Test.class.getClassLoader();
 4         System.out.println(classLoader);
 5         
 6         ClassLoader classLoader1 = classLoader.getParent();
 7         System.out.println(classLoader1);
 8         
 9         ClassLoader classLoader2 = classLoader1.getParent();
10         System.out.println(classLoader2); 
11     }
12 }
</code></pre>
<p>å®ƒçš„è¾“å‡ºæ˜¯ï¼š</p>
<pre><code class="language-java">sun.misc.Launcher$AppClassLoader@2a139a55
sun.misc.Launcher$ExtClassLoader@7852e922
null
</code></pre>
<p>classLoader2æ˜¯nullå€¼ã€‚å› ä¸ºæ€»å…±å°±æœ‰ä¸‰ä¸ªç±»åŠ è½½å™¨:</p>
<p>(1): æ ¹ç±»åŠ è½½å™¨(null)--**çˆ·çˆ·ğŸ‘´</p>
<p>å®ƒæ˜¯ç”±æœ¬åœ°ä»£ç (c/c++)å®ç°çš„ï¼Œä½ æ ¹æœ¬æ‹¿ä¸åˆ°ä»–çš„å¼•ç”¨ï¼Œä½†æ˜¯ä»–å®é™…å­˜åœ¨ï¼Œå¹¶ä¸”åŠ è½½ä¸€äº›é‡è¦çš„ç±»ï¼Œå®ƒåŠ è½½(%JAVA_HOME%\jre\lib),å¦‚rt.jar(runtime)ã€i18n.jarç­‰ï¼Œè¿™äº›æ˜¯Javaçš„æ ¸å¿ƒç±»ã€‚</p>
<p>(2): æ‰©å±•ç±»åŠ è½½å™¨(ExtClassLoader)--**çˆ¹ğŸ‘¨</p>
<p>è™½è¯´èƒ½æ‹¿åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®è·µä¸­å¾ˆå°‘ç”¨åˆ°å®ƒï¼Œå®ƒä¸»è¦åŠ è½½æ‰©å±•ç›®å½•ä¸‹çš„jaråŒ…ï¼Œ %JAVA_HOME%\lib\ext</p>
<p>(3): åº”ç”¨ç±»åŠ è½½å™¨(AppClassLoader)--**ä½ ğŸ‘¶</p>
<p>å®ƒä¸»è¦åŠ è½½æˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­çš„ç±»ï¼Œå¦‚Test,æˆ–è€…ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åŒ…,å¦‚jdbcé©±åŠ¨åŒ…ç­‰ã€‚</p>
<p>**è¿™é‡Œçš„çˆ¶ç±»åŠ è½½å™¨ä¸ç±»ä¸­ç»§æ‰¿æ¦‚å¿µè¦åŒºåˆ†ï¼Œå®ƒä»¬åœ¨classå®šä¹‰ä¸Šæ˜¯æ²¡æœ‰çˆ¶å­å…³ç³»çš„ã€‚</p>
<p>å››ã€ClassåŠ è½½æ—¶è°ƒç”¨ç±»åŠ è½½å™¨çš„é¡ºåº</p>
<p>å½“ä¸€ä¸ªç±»è¦è¢«åŠ è½½æ—¶ï¼Œæœ‰ä¸€ä¸ªå¯åŠ¨ç±»åŠ è½½å™¨å’Œå®é™…ç±»åŠ è½½å™¨çš„æ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µè¯·çœ‹å¦‚ä¸‹åˆ†æ</p>
<p>å¦‚ä¸Šé¢çš„Test.classè¦è¿›è¡ŒåŠ è½½æ—¶ï¼Œå®ƒå°†ä¼šå¯åŠ¨åº”ç”¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½Testç±»ï¼Œä½†æ˜¯è¿™ä¸ªåº”ç”¨ç±»åŠ è½½å™¨ä¸ä¼šçœŸæ­£å»åŠ è½½ä»–ï¼Œè€Œæ˜¯ä¼šè°ƒç”¨çœ‹æ˜¯å¦æœ‰çˆ¶åŠ è½½å™¨ï¼Œç»“æœæœ‰ï¼Œæ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ä¹Ÿä¸ä¼šç›´æ¥å»åŠ è½½ï¼Œå®ƒçœ‹è‡ªå·±æ˜¯å¦æœ‰çˆ¶åŠ è½½å™¨æ²¡ï¼Œç»“æœå®ƒè¿˜æ˜¯æœ‰çš„ï¼Œæ˜¯æ ¹ç±»åŠ è½½å™¨ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªæ—¶å€™æ ¹ç±»åŠ è½½å™¨å°±å»åŠ è½½è¿™ä¸ªç±»ï¼Œå¯åœ¨%JAVA_HOME%\jre\libä¸‹ï¼Œå®ƒæ‰¾ä¸åˆ°com.wangmeng.Testè¿™ä¸ªç±»ï¼Œæ‰€ä»¥ä»–å‘Šè¯‰ä»–çš„å­ç±»åŠ è½½å™¨ï¼Œæˆ‘æ‰¾ä¸åˆ°ï¼Œä½ å»åŠ è½½å§ï¼Œå­ç±»æ‰©å±•ç±»åŠ è½½å™¨å»%JAVA_HOME%\lib\extå»æ‰¾ï¼Œä¹Ÿæ‰¾ä¸ç€ï¼Œå®ƒå‘Šè¯‰å®ƒçš„å­ç±»åŠ è½½å™¨ AppClassLoaderï¼Œæˆ‘æ‰¾ä¸åˆ°è¿™ä¸ªç±»ï¼Œä½ å»åŠ è½½å§ï¼Œç»“æœAppClassLoaderæ‰¾åˆ°äº†ï¼Œå°±åŠ åˆ°å†…å­˜ä¸­ï¼Œå¹¶ç”ŸæˆClasså¯¹è±¡ã€‚<br>
è¿™ä¸ªæ—¶é—´æ—¶å€™å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆåº”ç”¨ç±»åŠ è½½å™¨ï¼‰å’Œå®é™…ç±»åŠ è½½å™¨ï¼ˆåº”ç”¨ç±»åŠ è½½å™¨ï¼‰æ˜¯åŒä¸€ä¸ª.</p>
<p>è¿™å°±æ˜¯Javaä¸­è‘—åçš„å§”æ‰˜åŠ è½½æœºåˆ¶ï¼Œçœ‹å¦‚ä¸‹å›¾ï¼š</p>
<figure data-type="image" tabindex="2"><img src="http://stevenhy.com/post-images/1567820814324.jpg" alt=""></figure>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ java.lang.Longçš„åŠ è½½ï¼ŒæŒ‰ä¸Šé¢åˆ†æï¼Œåº”è¯¥æ˜¯ç”±æ ¹ç±»åŠ è½½å™¨åŠ è½½å¾—åˆ°çš„ï¼Œæ­¤æ—¶å¯åŠ¨ç±»åŠ è½½å™¨æ˜¯åº”ç”¨ç±»åŠ è½½å™¨ï¼Œä½†å®é™…ç±»åŠ è½½å™¨æ˜¯æ ¹ç±»åŠ è½½å™¨ã€‚</p>
<p>æ‰€ä»¥å›åˆ°æˆ‘ä»¬æœ€å¼€å§‹é‚£ä¸ªé—®é¢˜ï¼Œæ²¡æœ‰mainæ–¹æ³•æ˜¯å› ä¸ºæ‰§è¡Œçš„æ ¹æœ¬ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œæ‰§è¡Œçš„æ˜¯javaæ ¸å¿ƒä¸­çš„é‚£ä¸ªLongç±»ï¼Œå½“ç„¶æ²¡æœ‰mainæ–¹æ³•äº†ã€‚ è¿™æ ·å°±é˜²æ­¢æˆ‘ä»¬åº”ç”¨ä¸­å†™çš„ç±»è¦†ç›–æ‰javaæ ¸å¿ƒç±»ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="http://stevenhy.com/tag/java" class="tag">
                    Java
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="http://stevenhy.com/post/2-tqcbh4i">
                  <h3 class="post-title">
                    åå°„
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '0ea7409b2c225a0a6a5c',
        clientSecret: '4785880f1cf8f357a26f8fa8f2401d7758b31f74',
        repo: 'Hanyuyu.github.io',
        owner: 'Hanyuyu',
        admin: ['Hanyuyu'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
